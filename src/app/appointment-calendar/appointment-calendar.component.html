<div class="calendar-container">
  <h2>Schedule an Appointment</h2>

  <div class="calendar">
    <div class="calendar-header">
      <button class="nav-btn" (click)="previousMonth()">&lt;</button>
      <h3>{{ getMonthYear() }}</h3>
      <button class="nav-btn" (click)="nextMonth()">&gt;</button>
    </div>

    <div class="weekdays">
      <div class="weekday">Sun</div>
      <div class="weekday">Mon</div>
      <div class="weekday">Tue</div>
      <div class="weekday">Wed</div>
      <div class="weekday">Thu</div>
      <div class="weekday">Fri</div>
      <div class="weekday">Sat</div>
    </div>

    <div class="calendar-days">
      <div
        *ngFor="let day of calendarDays"
        class="calendar-day"
        [class.selected]="isDateSelected(day)"
        [class.disabled]="isDatePast(day)"
        (click)="!isDatePast(day) && selectDate(day)">
        {{ day.getDate() }}
      </div>
    </div>
  </div>

  <div class="time-selection" *ngIf="selectedDate">
    <h3>Available Times for {{ formatDate(selectedDate) }}</h3>
    <form [formGroup]="appointmentForm" (ngSubmit)="onSubmit()">
      <div class="time-slots">
        <button
          *ngFor="let time of timeSlots"
          type="button"
          class="time-slot"
          [class.selected]="appointmentForm.get('time')?.value === time"
          [class.booked]="isTimeSlotBooked(time)"
          [disabled]="isTimeSlotBooked(time)"
          (click)="selectTime(time)">
          {{ time }}
        </button>
      </div>

      <button
        type="submit"
        class="schedule-btn"
        [disabled]="appointmentForm.invalid">
        Schedule Appointment
      </button>
    </form>
  </div>
</div>
