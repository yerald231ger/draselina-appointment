@page "/schedule"

<div class="py-4">
    <h1 class="mb-4 fs-2 fw-bold">Calendario de citas</h1>

    <div class="row g-4">
        <!-- Calendar Section -->
        <div class="col-12 col-lg-4">
            <CalendarSelector SelectedDate="@SelectedDate"
                              SelectedDateChanged="@(date => SelectedDate = date)" />
        </div>

        <!-- Time Slots and Form Section -->
        <div class="col-12 col-lg-8">
            <div class="card border shadow-sm">
                <div class="card-body">
                    <h3 class="h5 fw-bold mb-3">Select Time</h3>

                    <!-- Time Slots -->
                    <TimeSlotSelector AvailableTimes="@AvailableTimes"
                                      SelectedTime="@SelectedTime"
                                      SelectedTimeChanged="@(time => SelectedTime = time)" />

                    <!-- Appointment Form -->
                    <AppointmentForm FirstName="@FirstName"
                                     FirstNameChanged="@(value => FirstName = value)"
                                     LastName="@LastName"
                                     LastNameChanged="@(value => LastName = value)"
                                     PhoneNumber="@PhoneNumber"
                                     PhoneNumberChanged="@(value => PhoneNumber = value)"
                                     OnConfirm="@ConfirmAppointment" />
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private DateTime? SelectedDate { get; set; }
    private string? SelectedTime { get; set; }
    private string FirstName { get; set; } = string.Empty;
    private string LastName { get; set; } = string.Empty;
    private string PhoneNumber { get; set; } = string.Empty;

    private List<string> AvailableTimes { get; set; } = new()
    {
        "09:00 AM", "10:00 AM", "11:00 AM", "01:00 PM",
        "02:00 PM", "03:00 PM", "04:00 PM"
    };

    private void ConfirmAppointment()
    {
        // TODO: Call API to create appointment
        Console.WriteLine($"Appointment for {FirstName} {LastName} on {SelectedDate?.ToShortDateString()} at {SelectedTime}");
    }
}
